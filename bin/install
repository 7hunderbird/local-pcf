#!/bin/bash

set -eu

# Please note cfdev only supports macOS at this time
# https://github.com/cloudfoundry-incubator/cfdev#prerequisites

### - Homebrew packages

install_brew_packages () {
    brew tap cloudfoundry/tap
    brew tap pivotal/tap
    brew install cloudfoundry/tap/cf-cli
    brew install pivotal/tap/pivnet-cli
    brew install pv
}

### - CF DEV plugin

# https://github.com/cloudfoundry-incubator/cfdev/issues/53
# version 0.0.11 not compatible with latest pcfdev, using 0.0.10

install_cf_dev () {
    cf install-plugin \
      http://d3p1cc0zb2wjno.cloudfront.net/cfdev/cfdev-v0.0.10-darwin "cfdev" -f
}

echo "Installing brew packages..."

install_brew_packages

echo "Installing cfdev plugin..."

install_cf_dev
